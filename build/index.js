!function(){"use strict";var e,t={138:function(){var e=window.wp.element,t=window.wp.blocks,n=(window.wp.i18n,window.wp.blockEditor),r=window.wp.components,o=window.lodash,c=window.wp.data,l=window.wp.coreData;const a=t=>{const{taxonomySlug:n,selectedTermId:a,onSelectedTermChange:i}=t,{availableTerms:s}=(0,c.useSelect)((e=>{const{getEntityRecords:t}=e(l.store);return{availableTerms:t("taxonomy",n,{per_page:-1})||[]}}),[]),d=(0,e.useMemo)((()=>function(e){const t=e.map((e=>({children:[],parent:null,...e}))),n=(0,o.groupBy)(t,"parent");if(n.null&&n.null.length)return t;const r=e=>e.map((e=>{const t=n[e.id];return{...e,children:t&&t.length?r(t):[]}}));return r(n[0]||[])}(s)),[s]),m=t=>t.map((t=>(0,e.createElement)("div",{key:t.id,className:"editor-post-taxonomies__hierarchical-terms-choice"},(0,e.createElement)(r.CheckboxControl,{checked:t.id===a,onChange:()=>{const e=parseInt(t.id,10);i(e)},label:(0,o.unescape)(t.name)}),!!t.children.length&&(0,e.createElement)("div",{className:"editor-post-taxonomies__hierarchical-terms-subchoices"},m(t.children)))));return(0,e.createElement)("div",{className:"editor-post-taxonomies__hierarchical-terms-list"},m(d))};var i=window.React,s=JSON.parse('{"u2":"ubc/subcategory-block"}');(0,t.registerBlockType)(s.u2,{edit:function(t){const{attributes:c,setAttributes:s,context:d}=t,{taxonomySlug:m,selectedTermId:u,hideEmpty:p,isLink:h,tag:v}=c,{postId:g,postType:w}=d,b=(0,n.useBlockProps)(),f="post"===w?{per_page:-1,hideEmpty:p,context:"view",child_of:u||0,post:g}:{per_page:-1,hideEmpty:p,context:"view",child_of:u||0},{records:y,isResolving:E}=(0,l.useEntityRecords)("taxonomy","category",f);return(0,e.createElement)(i.Fragment,null,!E&&y&&y.length>0?(0,e.createElement)(v,b,y.map(((t,n)=>h?(0,e.createElement)("a",{key:n,href:t.link},(0,o.unescape)(t.name).trim()):(0,e.createElement)("span",{key:n},(0,o.unescape)(t.name).trim()))).reduce(((e,t)=>[e,", ",t]))):null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:"Select a parent term",className:"ubc-subcategory-panel-category",initialOpen:!0},(0,e.createElement)(r.PanelRow,null,(0,e.createElement)(a,{taxonomySlug:m,selectedTermId:u,onSelectedTermChange:e=>{s({selectedTermId:e===u?void 0:e})}}))),(0,e.createElement)(r.PanelBody,{title:"Settings",className:"ubc-subcategory-panel-settings",initialOpen:!0},(0,e.createElement)(r.PanelRow,null,(0,e.createElement)(r.ToggleControl,{label:"Link terms",help:h?"Terms will be linked to their archive pages.":"Terms will not be linked.",checked:h,onChange:()=>{s({isLink:!h})}})),(0,e.createElement)(r.PanelRow,null,(0,e.createElement)(r.ToggleControl,{label:"Hide empty terms",help:p?"Terms that do not have any posts attached will be hidden.":"Terms that do not have any posts attached will be visible.",checked:p,onChange:()=>{s({hideEmpty:!p})}})))))},icon:(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,e.createElement)("path",{d:"M20 4H4v1.5h16V4zm-2 9h-3c-1.1 0-2 .9-2 2v3c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2v-3c0-1.1-.9-2-2-2zm.5 5c0 .3-.2.5-.5.5h-3c-.3 0-.5-.2-.5-.5v-3c0-.3.2-.5.5-.5h3c.3 0 .5.2.5.5v3zM4 9.5h9V8H4v1.5zM9 13H6c-1.1 0-2 .9-2 2v3c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2v-3c0-1.1-.9-2-2-2zm.5 5c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-3c0-.3.2-.5.5-.5h3c.3 0 .5.2.5.5v3z",fillRule:"evenodd",clipRule:"evenodd"}))})}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var c=n[e]={exports:{}};return t[e](c,c.exports,r),c.exports}r.m=t,e=[],r.O=function(t,n,o,c){if(!n){var l=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],c=e[d][2];for(var a=!0,i=0;i<n.length;i++)(!1&c||l>=c)&&Object.keys(r.O).every((function(e){return r.O[e](n[i])}))?n.splice(i--,1):(a=!1,c<l&&(l=c));if(a){e.splice(d--,1);var s=o();void 0!==s&&(t=s)}}return t}c=c||0;for(var d=e.length;d>0&&e[d-1][2]>c;d--)e[d]=e[d-1];e[d]=[n,o,c]},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,c,l=n[0],a=n[1],i=n[2],s=0;if(l.some((function(t){return 0!==e[t]}))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(i)var d=i(r)}for(t&&t(n);s<l.length;s++)c=l[s],r.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return r.O(d)},n=self.webpackChunkubc_subcategory_block=self.webpackChunkubc_subcategory_block||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=r.O(void 0,[431],(function(){return r(138)}));o=r.O(o)}();